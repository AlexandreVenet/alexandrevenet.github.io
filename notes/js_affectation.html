<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="utf-8">
		<title>JS : affectation</title>
		<meta name="author" content="Alexandre Venet">
		<meta name="description" content="Affecter une valeur à une variable en Javascript.">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
		<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="../css/styles.css">
	</head>
	<body>

		<header>
			<div class="conteneur">
				<a href="https://alexandrevenet.github.io" title="Alexandre Venet sur GitHub">alexandrevenet.github.io</a>
			</div>
		</header>

		<main>
			<div class="conteneur">
				<section>
					<h1>JS : affectation</h1>
					<p class="couleurGris">De l'affectation des variables.</p>
					<a class="lien margeBas" href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Guide/Expressions_et_Op%C3%A9rateurs#Op%C3%A9rateurs_d'affectation" target="_blank">Expressions et opérateurs d'affectation sur MDN</a>
				</section>
				<section>
					<h2>Cas général</h2>
					<p>L'<strong>opérateur d'affectation (=)</strong> est un opérateur <strong>binaire</strong>. Il <strong>assigne</strong> à l'<strong>opérande de gauche</strong> la <strong>valeur</strong> de l'<strong>opérande de droite</strong>.</p>
					<pre><code>
var toto = 0;
					</code></pre>
					<p>On peut aussi assigner la valeur par <strong>opération arithmétique</strong> :</p>
					<pre><code>
let chose = 5;
chose %= 2; // 1 par modulo, cad qu'il y a un reste
					</code></pre>
				</section>
				<section>
					<h2>Problème</h2>
					<p>Dans le cas suivant, quel est la valeur des variables ?</p>
					<pre><code>
var a = b = 3;
					</code></pre>
					<p>L'<strong>erreur</strong> est de croire que ceci est équivalent à :</p>
					<pre><code>
var b = 3;
var a = b;
					</code></pre>
					<p>En fait, l'expression est un <strong>raccourci</strong> à :</p>
					<pre><code>
b = 3; // variable globale
var a = b; // variable locale
					</code></pre>
					<p><code>b</code> est une variable <strong>globale</strong> car non précédée de mot-clé, disponible quelle que soit la <strong>portée</strong>. <code>a</code> est une variable <strong>locale</strong> dans la portée actuelle.</p>
					<p>On peut aussi réécrire l'expression de cette manière :</p>
					<pre><code>
var a = (b = 3) ; // a locale, b globale
					</code></pre>
					<p>Ainsi, du fait de la différence de portée, si l'on insère cette expression dans une fonction, et que l'on appelle <code>a</code> <strong>hors</strong> de cette fonction, alors <code>a</code> est <code>undefined</code> ; mais <strong>dans</strong> la fonction, <code>a</code> vaut <code>3</code> :</p>
					<pre><code>
(function(){ // fonction anonyme auto-exécutée
	var a = b = 3;
	console.log(a); // 3
	console.log(b); // 3
})();
console.log(a); // undefined
console.log(b); // 3
					</code></pre>
				</section>
			</div>
		</main>

		<footer>
		</footer>

	</body>
</html>
